---
title: "NEO Close Approaches & Sentry: Earth Impact Monitoring"
author:
  - Cory Cone
  - RASV Final Project Data Exploration
output:
  html_document:
    toc: true
    toc_depth: 3
    theme: united
---


```{r setup, include=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning = FALSE)
```

## NEO & Impact Data

"Near-Earth Objects (NEOs) are comets and asteroids that have been nudged by the gravitational attraction of nearby planets into orbits that allow them to enter the Earthâ€™s neighborhood." Source: [NEO Basics](https://cneos.jpl.nasa.gov/about/basics.html)

### About NEO Close Approach dataset
```{r message=FALSE, echo = TRUE}
library(tidyverse)
library(RColorBrewer)
library(lubridate)
cneos_closeapproach_data <- read.csv("datafiles/cneos_closeapproach_data.csv", stringsAsFactors = FALSE)

cneos_sentry_summary_data <- read.csv("datafiles/cneos_sentry_summary_data.csv", stringsAsFactors = FALSE)

colnames(cneos_closeapproach_data) <- c("Object", "Close-Approach Date", "CA Distance Nominal", 
                                        "CA Distance Minimum", "V Relative", "V Infinity", "H", "Est. Diameter", "UniqueID")
                                
colnames(cneos_sentry_summary_data) <- c("Object", "Year Range", "Potential_Impacts", 
                                        "Cum Impact Probability", "V Infinity", "H", "Est. Diameter", 
                                        "Palermo Scale cum", "Palermo Scale max", "Torino Scale", "UniqueID")
#fix dates (no time)
cneos_closeapproach_data$`Close-Approach Date` <-  substring(cneos_closeapproach_data$`Close-Approach Date`,1,11)

#Collision joined with Close Approach
collision_NEO <- inner_join(cneos_closeapproach_data, cneos_sentry_summary_data, by = "UniqueID")
```
The Near-Earth object dataset was retrieved from [https://cneos.jpl.nasa.gov/ca/](https://cneos.jpl.nasa.gov/ca/) using the following Table Filters:

* All Available Data
* Nominal Dist. <=0.05au
* no H limit

This retrieved a dataset containing `r formatC(nrow(cneos_closeapproach_data), format="d", big.mark=",")` rows and `r ncol(cneos_closeapproach_data)` columns.

My final analysis will include any important data dictionary data within the Markdown document for easy reference. Data dictionary can be viewed [Here](https://cneos.jpl.nasa.gov/ca/) by expanding the *Table Column Descriptions* at the bottom of the page.

**Excerpt from NEO Close Approaches**


```{r message=FALSE, echo = TRUE}
knitr::kable(
  cneos_closeapproach_data[1:10, ],
  caption = "NEO Close Approach Dataset Example"
)
```

### About Sentry: Earth Impact Monitoring dataset

The Sentry: Earth Impact Monitoring dataset was retrieved from [https://cneos.jpl.nasa.gov/sentry/](https://cneos.jpl.nasa.gov/sentry/) using the following Table Filters:

* Observed Anytime
* Any Impact Probability
* Any Palermo scale
* Any H

The data retrieved contains `r formatC(nrow(cneos_sentry_summary_data), format="d", big.mark=",")` rows and `r ncol(cneos_sentry_summary_data)` columns.

The data dictionary for this set can be referenced [here](https://cneos.jpl.nasa.gov/sentry/) by expanding the Table Column Descriptions section.

**Excerpt from Sentry: Earth Impact Monitoring**

```{r message=FALSE, echo = TRUE}
knitr::kable(
  cneos_sentry_summary_data[1:10, ],
  caption = "Sentry: Earth Impact Monitoring Excerpt"
)
```

### The Joined Data

I've joined both datasets to create a third that contains all data from the Sentry: Earth Impact Monitoring set and the additional data from the NEO Close Approaches set. This joined set contains `r formatC(nrow(collision_NEO), format="d", big.mark=",")` rows and `r ncol(collision_NEO)` columns. There are several repeated columns, which will be tidied for the final presentation.

This was accomplished easily because all the datasets that include these objects assign them a UniqueID. 

**Excerpt from the joined dataset**

```{r message=FALSE, echo = TRUE}
knitr::kable(
  collision_NEO[1:10, ],
  caption = "Joined Dataset Example"
)
```

All the datasets contain a mixture of character, integer, number and date fields, which off many opportunities for anlysis.


## Potential analysis ideas

There is a lot here, so finding a good, focussed narrative may prove challenging. There is ample opportunity for grouping together interesting populations within these objects, and digging in from there. One place to begin might be looking at the distribution of possible collisions with Earth by object.

**Some basic statistics**

* Average Earth Collisions by a Single Object: `r mean(cneos_sentry_summary_data$Potential_Impacts)`
* Maximum Earth Collisions by a Single Object: `r max(cneos_sentry_summary_data$Potential_Impacts)`
* Minimum Earth Collisions by a Single Object: `r min(cneos_sentry_summary_data$Potential_Impacts)`

**About the NEO objects**

```{r message=FALSE, echo = TRUE}
object_count <- nrow(distinct(cneos_closeapproach_data %>% select("Object")))
#17853 Unique Objects`
impact_count <- nrow(distinct(cneos_sentry_summary_data %>% select("Object")))
#986 Potential Impacts
impact_percent <- impact_count/object_count*100

# 5.52% of all known objects have a chance to impact Earth.

```

`r object_count` total objects are in the Close Approach dataset. `r impact_count` of those have a potential of Earth impact. That means `r impact_percent` percent of all known NEO's could hit Earth.

Those objects each have a number of times they could hit earth, as noted above. That is visualized in the draft histogram below. 

```{r message=FALSE, echo = TRUE}
ggplot(cneos_sentry_summary_data, aes(x = cneos_sentry_summary_data$Potential_Impacts)) +
  geom_histogram(bins = 45, fill = "#253494", color = "#081d58") +
  theme_classic() +
  labs(title = "Histogram of Possible Collisions Per NEO",
       x = "# of Time an Object Could Strike Earth",
       y = "Number of Objects")
```


**Avenues this and other areas of the data could lead us include:**

* Correlation between object size and speed
* Correlation between number of potential strikes and speed (or size)
* Are the particular similarities between those that could strike earth and those that won't (besides the obvious)?
* The ratio of known objects and those that might strike. 
* Statitical analysis based around the Palermo Scale and Torino Scale (These essentially measure how horrific an incident might be)
* Correlations between speed, size, number of approaches, and the above scales.
* Can we do any sort of predictive analytics based on the dates of observes NEOs and their data? THere may be a some distribution analysis to allow us to estimate how many new potential strike objects may present themselves in the next 100 or more years. 

This all just scratches the surface, and I anticipate finding other exciting things as I dig deeper into the final presentation. One thing that could be fun, if I can figure it out, is a facet grid comparison of the top 10 largest NEOs compared to Earth (think two circles next to each other). Visually this could be nice to look at if I can pull it off correctly. Depending on learning curve for that sort of visual, I may try.

In the end, I am finding myself most drawn to the potential collision aspect of this data, and may focus mostly there. 






